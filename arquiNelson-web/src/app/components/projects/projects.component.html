<section id="portfolio" class="projects">
  <div class="container">
    <div class="section-header">
      <h2>Nuestros Proyectos</h2>
      <p>Proyectos destacados de nuestra cartera inmobiliaria</p>
    </div>

    <div class="projects-grid">
      <div class="project-card" *ngFor="let project of projects" (click)="openProject(project)">
        <div class="project-image" [style.background-image]="'url(' + project.image + ')'">
          <div class="project-overlay">
            <div class="project-info">
              <span class="category">{{ project.category }}</span>
              <h3>{{ project.title }}</h3>
              <p>{{ project.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal del Proyecto -->
  <div class="project-modal" *ngIf="selectedProject" (click)="closeProject()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeProject()">✕</button>
      <div class="modal-image" [style.background-image]="'url(' + selectedProject.image + ')'"></div>
      <div class="modal-body">
        <span class="modal-category">{{ selectedProject.category }}</span>
        <h2>{{ selectedProject.title }}</h2>
        <p>{{ selectedProject.details }}</p>
        <div class="modal-actions">
          <button class="btn btn-primary" (click)="openAutodeskModal()" *ngIf="selectedProject.autodesk360Url">Más Información</button>
          <button class="btn btn-secondary" (click)="closeProject()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Autodesk 360 -->
  <div class="autodesk-modal" *ngIf="showAutodeskModal" (click)="closeAutodeskModal()">
    <div class="autodesk-modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeAutodeskModal()">✕</button>
      <iframe [src]="sanitizedUrl" class="autodesk-iframe" allow="clipboard-write; camera; microphone"></iframe>
    </div>
  </div>
</section>
