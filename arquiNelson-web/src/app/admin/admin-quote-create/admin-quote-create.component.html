<section class="quote-create">
  <a class="back-link" routerLink="/admin/quotes">Volver a cotizaciones</a>

  <header class="header">
    <div>
      <h2>Nueva cotizacion</h2>
      <p>Registra los datos base antes de agregar servicios extra.</p>
    </div>
    <button type="button" (click)="createQuote()" [disabled]="saving || loading">
      Crear cotizacion
    </button>
  </header>

  <div class="panel">
    <div class="form-grid">
      <label>
        Nombre completo
        <input name="fullName" [(ngModel)]="draft.fullName" placeholder="Nombre y apellido" />
      </label>
      <label>
        Telefono
        <input name="phone" [(ngModel)]="draft.phone" placeholder="999 999 999" />
      </label>
      <label>
        Correo
        <input name="email" type="email" [(ngModel)]="draft.email" placeholder="correo@empresa.com" />
      </label>
      <label>
        Proyecto
        <input name="projectName" [(ngModel)]="draft.projectName" placeholder="Nombre provisional" />
      </label>
      <label>
        Area (m2)
        <input name="areaM2" type="number" min="0" step="0.01" [(ngModel)]="draft.areaM2" />
      </label>
      <label>
        Tarifa por m2 (PEN)
        <input
          name="baseRatePerM2"
          type="number"
          min="0"
          step="0.01"
          [(ngModel)]="draft.baseRatePerM2"
        />
      </label>
      <label>
        Tarifa guardada
        <select name="pricingRateId" [(ngModel)]="draft.pricingRateId" (change)="onRateChange()">
          <option [ngValue]="null">Manual</option>
          <option *ngFor="let rate of rates" [ngValue]="rate.id">
            {{ rate.name }} ({{ rate.basePricePerM2 }} {{ rate.currency }})
          </option>
        </select>
      </label>
      <label>
        Estado
        <select name="status" [(ngModel)]="draft.status">
          <option value="new">Nueva</option>
          <option value="reviewed">Revisada</option>
          <option value="sent">Enviada</option>
          <option value="accepted">Aceptada</option>
          <option value="rejected">Rechazada</option>
        </select>
      </label>
      <label class="wide">
        Notas
        <textarea name="notes" rows="3" [(ngModel)]="draft.notes"></textarea>
      </label>
    </div>

    <p class="hint">Los servicios extra se agregan luego en el detalle.</p>
    <p class="error" *ngIf="error">{{ error }}</p>
  </div>
</section>
